<!DOCTYPE html>
<html lang="{{#if language}}{{language}}{{else}}{{#if settings.site.language}}{{settings.site.language}}{{else}}en{{/if}}{{/if}}" data-base-url="{{baseUrl}}">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Cache Control Directives -->
  <meta http-equiv="Cache-Control" content="public, max-age=3600, must-revalidate">
  <meta http-equiv="Expires" content="Thu, 01 Jan 2025 12:00:00 GMT">
  <meta http-equiv="Pragma" content="cache">
  <meta http-equiv="Last-Modified" content="Mon, 01 Jan 2024 12:00:00 GMT">
  
  <meta name="keywords" content="{{keywords}}">
  <title>{{title}}</title>
  <!-- âœ… Canonical and alternate language links -->
  {{#if settings.site.url}}
    {{#eq page.path '/index.html'}}
      <!-- For index page, use clean URL without index.html -->
  <link data-rh="true" rel="canonical" href="{{settings.site.url}}/">
  <link data-rh="true" rel="alternate" href="{{settings.site.url}}/" hreflang="{{#if language}}{{language}}{{else}}{{#if settings.site.language}}{{settings.site.language}}{{else}}en{{/if}}{{/if}}">
  <link data-rh="true" rel="alternate" href="{{settings.site.url}}/" hreflang="x-default">
    {{else}}
      <!-- For other pages, use the full path with filename -->
  <link data-rh="true" rel="canonical" href="{{settings.site.url}}{{transformUrl page.path settings}}">
  <link data-rh="true" rel="alternate" href="{{settings.site.url}}{{transformUrl page.path settings}}" hreflang="{{#if language}}{{language}}{{else}}{{#if settings.site.language}}{{settings.site.language}}{{else}}en{{/if}}{{/if}}">
  <link data-rh="true" rel="alternate" href="{{settings.site.url}}{{transformUrl page.path settings}}" hreflang="x-default">
    {{/eq}}
  {{else}}
    {{#eq page.path '/index.html'}}
      <!-- For index page without site.url, use clean URL -->
  <link data-rh="true" rel="canonical" href="{{baseUrl}}">
  <link data-rh="true" rel="alternate" href="{{baseUrl}}" hreflang="{{#if language}}{{language}}{{else}}{{#if settings.site.language}}{{settings.site.language}}{{else}}en{{/if}}{{/if}}">
  <link data-rh="true" rel="alternate" href="{{baseUrl}}" hreflang="x-default">
    {{else}}
      <!-- For other pages without site.url, use relative path -->
  <link data-rh="true" rel="canonical" href="{{baseUrl}}{{transformUrl page.path settings}}">
  <link data-rh="true" rel="alternate" href="{{baseUrl}}{{transformUrl page.path settings}}" hreflang="{{#if language}}{{language}}{{else}}{{#if settings.site.language}}{{settings.site.language}}{{else}}en{{/if}}{{/if}}">
  <link data-rh="true" rel="alternate" href="{{baseUrl}}{{transformUrl page.path settings}}" hreflang="x-default">
    {{/eq}}
  {{/if}}

  <!-- Open Graph / Facebook -->
  <meta property='og:type' content='website' />
  <meta property='og:title' content='{{title}}' />
  <meta property='og:description' content='{{settings.site.description}}' />
  <meta property='og:image' content='{{baseUrl}}og-image.png' />

  <!-- Twitter -->
  <meta property='twitter:card' content='summary_large_image' />
  <meta property='twitter:title' content='{{title}}' />
  <meta property='twitter:description' content='{{settings.site.description}}' />
  <meta property='twitter:image' content='{{baseUrl}}og-image.png' />
  <link rel="stylesheet" href="{{baseUrl}}mystyles.css?cachebrk={{cacheBreaker}}" type="text/css" />
  <script src="https://unpkg.com/lunr/lunr.js" defer></script>
  <script src="{{baseUrl}}mybundle.js?cachebrk={{cacheBreaker}}" defer></script>
  <link rel="stylesheet" href="{{baseUrl}}github-dark.min.css" type="text/css" />
  <link href="https://cdn.jsdelivr.net/npm/daisyui@5/themes.css" rel="stylesheet" type="text/css" />
  <link rel="icon" href="{{joinUrl baseUrl settings.site.favicon}}" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="180x180" href="{{baseUrl}}apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="{{baseUrl}}favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="{{baseUrl}}favicon-16x16.png">
  <link rel="manifest" href="{{baseUrl}}site.webmanifest">

  <!-- Dark mode prose styling -->
  <style>
    [data-theme="{{settings.site.theme.dark}}"] .prose h1,
    [data-theme="{{settings.site.theme.dark}}"] .prose h2,
    [data-theme="{{settings.site.theme.dark}}"] .prose h3,
    [data-theme="{{settings.site.theme.dark}}"] .prose h4,
    [data-theme="{{settings.site.theme.dark}}"] .prose h5,
    [data-theme="{{settings.site.theme.dark}}"] .prose h6 {
      color: #e2e8f0 !important;
    }
    [data-theme="{{settings.site.theme.dark}}"] .prose p {
      color: #cbd5e1 !important;
    }
    [data-theme="{{settings.site.theme.dark}}"] .prose ul,
    [data-theme="{{settings.site.theme.dark}}"] .prose ol {
      color: #cbd5e1 !important;
    }
    [data-theme="{{settings.site.theme.dark}}"] .prose li {
      color: #cbd5e1 !important;
    }
    [data-theme="{{settings.site.theme.dark}}"] .prose table {
      color: #cbd5e1 !important;
    }
    [data-theme="{{settings.site.theme.dark}}"] .prose th {
      color: #e2e8f0 !important;
      border-color: #475569 !important;
    }
    [data-theme="{{settings.site.theme.dark}}"] .prose td {
      border-color: #475569 !important;
    }
    [data-theme="{{settings.site.theme.dark}}"] .prose a {
      color: #60a5fa !important;
    }
    [data-theme="{{settings.site.theme.dark}}"] .prose a:hover {
      color: #93c5fd !important;
    }
    [data-theme="{{settings.site.theme.dark}}"] .prose strong {
      color: #f8fafc !important;
    }
    [data-theme="{{settings.site.theme.dark}}"] .prose em {
      color: #e2e8f0 !important;
    }
    [data-theme="{{settings.site.theme.dark}}"] .prose code {
      color: #f8fafc !important;
      background-color: #1e293b !important;
      padding: 0.2em 0.4em !important;
      border-radius: 0.25rem !important;
    }
    
    /* Fix code block styling in dark mode */
    [data-theme="{{settings.site.theme.dark}}"] .prose pre {
      background-color: #0d1117 !important;
      color: #c9d1d9 !important;
      line-height: 1.45 !important; /* Better line height for code */
      border: 1px solid #30363d !important;
    }
    
    [data-theme="{{settings.site.theme.dark}}"] .prose pre code {
      background-color: transparent !important;
      color: inherit !important;
      padding: 0 !important; /* Remove padding since pre already has it */
      line-height: inherit !important;
      font-size: inherit !important;
    }
    
    /* Ensure highlight.js styles work properly in dark mode */
    [data-theme="{{settings.site.theme.dark}}"] .hljs {
      background: #0d1117 !important;
      color: #c9d1d9 !important;
      line-height: 1.45 !important;
    }
    
    /* Code block title styles for dark mode */
    [data-theme="{{settings.site.theme.dark}}"] .code-block-title {
      background-color: #161b22 !important;
      border: 1px solid #30363d !important;
      border-bottom: none !important;
      color: #c9d1d9 !important;
    }
    
    /* Highlighted line styles for dark mode */
    [data-theme="{{settings.site.theme.dark}}"] .highlighted-line {
      background-color: rgba(245, 158, 11, 0.15) !important; /* More visible amber highlight for dark mode */
      border-left-color: rgba(251, 191, 36, 0.6) !important; /* amber-400 - more visible */
      box-shadow: inset 0 0 0 1px rgba(251, 191, 36, 0.05) !important; /* Subtle inner glow */
    }
    
    /* Fix line height for code blocks in light mode too */
    [data-theme="{{settings.site.theme.light}}"] .prose pre {
      line-height: 1.45 !important; /* Better line height for code */
    }
    
    [data-theme="{{settings.site.theme.light}}"] .prose pre code {
      line-height: inherit !important;
    }

    /* Fix alert/admonition text colors in dark mode */
    [data-theme="{{settings.site.theme.dark}}"] .alert {
      color: #1f2937 !important; /* Dark text for better contrast on colored backgrounds */
    }

    /* Dark mode specific alert styling */
    
    [data-theme="{{settings.site.theme.dark}}"] .alert-warning {
      color: #1f2937 !important; /* Dark text on yellow/amber background */
    }
    
    [data-theme="{{settings.site.theme.dark}}"] .alert-info {
      color: #1f2937 !important; /* Dark text on blue background */
    }
    
    [data-theme="{{settings.site.theme.dark}}"] .alert-success {
      color: #1f2937 !important; /* Dark text on green background */
    }
    
    [data-theme="{{settings.site.theme.dark}}"] .alert-error {
      color: #ffffff !important; /* White text on red background */
    }

    /* Improve neutral/default alert contrast in dark mode */
    [data-theme="{{settings.site.theme.dark}}"] .alert:not(.alert-warning):not(.alert-info):not(.alert-success):not(.alert-error) {
      background-color: #374151 !important; /* Darker gray background */
      color: #f9fafb !important; /* Light text */
      border: 1px solid #4b5563 !important; /* Subtle border */
    }

    /* Fix link colors within alerts in dark mode */
    [data-theme="{{settings.site.theme.dark}}"] .alert a {
      color: #1f2937 !important; /* Dark links for colored alert backgrounds */
      text-decoration: underline !important; /* Ensure links are distinguishable */
      font-weight: 600 !important; /* Make links more prominent */
    }
    
    [data-theme="{{settings.site.theme.dark}}"] .alert a:hover {
      color: #000000 !important; /* Even darker on hover */
      text-decoration: underline !important;
    }
    
    [data-theme="{{settings.site.theme.dark}}"] .alert-error a {
      color: #ffffff !important; /* White links on red background */
      text-decoration: underline !important;
    }
    
    [data-theme="{{settings.site.theme.dark}}"] .alert-error a:hover {
      color: #e5e5e5 !important; /* Slightly dimmed white on hover */
    }



    /* Dark mode specific adjustments for markdown in alerts */
    [data-theme="{{settings.site.theme.dark}}"] .alert code {
      background-color: rgba(0, 0, 0, 0.3) !important;
      color: #000000 !important; /* Black text for better contrast on colored backgrounds in dark mode */
      font-weight: 600 !important; /* Bolder for better visibility */
    }

    [data-theme="{{settings.site.theme.dark}}"] .alert pre {
      background-color: rgba(0, 0, 0, 0.2) !important;
      border-color: rgba(0, 0, 0, 0.3) !important;
    }

    [data-theme="{{settings.site.theme.dark}}"] .alert pre code {
      color: #000000 !important; /* Black text for better contrast */
      font-weight: 600 !important;
      background-color: transparent !important;
      white-space: pre !important; /* Preserve formatting, no wrapping */
    }

    /* Error alerts in dark mode: Maintain normal code block styling */
    [data-theme="{{settings.site.theme.dark}}"] .alert-error pre {
      background-color: #0d1117 !important; /* Same dark background */
      color: #c9d1d9 !important;
      border: 1px solid #30363d !important;
    }
    
    [data-theme="{{settings.site.theme.dark}}"] .alert-error pre code {
      background-color: transparent !important;
      color: inherit !important;
      white-space: pre !important;
    }

    [data-theme="{{settings.site.theme.dark}}"] .alert-error .hljs {
      background: #0d1117 !important;
      color: #c9d1d9 !important;
    }

    /* Inline code in error alerts for dark mode */
    [data-theme="{{settings.site.theme.dark}}"] .alert-error code:not(pre code) {
      background-color: rgba(0, 0, 0, 0.4) !important;
      color: #ffffff !important;
    }

    /* Default/neutral alerts need light text in dark mode */
    [data-theme="{{settings.site.theme.dark}}"] .alert:not(.alert-warning):not(.alert-info):not(.alert-success):not(.alert-error) code,
    [data-theme="{{settings.site.theme.dark}}"] .alert:not(.alert-warning):not(.alert-info):not(.alert-success):not(.alert-error) pre code {
      color: #e5e7eb !important; /* Light text for neutral/default alerts */
      background-color: rgba(255, 255, 255, 0.1) !important;
      white-space: pre !important; /* Preserve formatting, no wrapping */
    }



    /* Fix admonition components if used */
    [data-theme="{{settings.site.theme.dark}}"] .admonition {
      color: #1f2937 !important;
    }
    
    [data-theme="{{settings.site.theme.dark}}"] .admonition-title {
      color: #1f2937 !important;
      font-weight: 600 !important;
    }
  </style>

  <script>
    // Define themes for light and dark modes
    const lightTheme = '{{settings.site.theme.light}}';
    const darkTheme = '{{settings.site.theme.dark}}';

    // Theme switcher functionality
    window.setTheme = function(theme) {
      document.documentElement.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
      
      // Close any open dropdowns
      const dropdowns = document.querySelectorAll('.dropdown-open');
      dropdowns.forEach(dropdown => dropdown.classList.remove('dropdown-open'));
      
      // Blur the button to remove focus
      if (document.activeElement) {
        document.activeElement.blur();
      }
    };
    
    // Hybrid theme system: manual choice persists, otherwise follows OS
    function setTheme(themeName) {
      // Manual theme selection - save to localStorage
      localStorage.setItem('theme', themeName);
      document.documentElement.setAttribute('data-theme', themeName);
      console.log('Manual theme set:', themeName);
    }
    
    function loadTheme() {
      const savedTheme = localStorage.getItem('theme');
      
      if (savedTheme) {
        // Use saved manual choice
        document.documentElement.setAttribute('data-theme', savedTheme);
        console.log('Using saved theme:', savedTheme);
      } else {
        // Follow OS preference
        const isDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = isDark ? darkTheme : lightTheme;
        document.documentElement.setAttribute('data-theme', theme);
        console.log('Using OS theme:', theme, '(isDark:', isDark + ')');
      }
    }
    
    function resetToOSTheme() {
      // Clear manual choice and follow OS
      localStorage.removeItem('theme');
      loadTheme();
    }

    // Load theme immediately
    loadTheme();

    // Listen for OS theme changes (always override manual choice)
    if (window.matchMedia) {
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
        const theme = e.matches ? darkTheme : lightTheme;
        // OS change always wins - save to localStorage and apply
        localStorage.setItem('theme', theme);
        document.documentElement.setAttribute('data-theme', theme);
        console.log('OS theme changed to:', theme, '- overriding any manual choice');
      });
    }

    // Removed dynamic sidebar height calculation - now handled by CSS sticky footer layout
  </script>
  
  <!-- Mermaid.js for diagram rendering -->
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    
    // Convert code.language-mermaid to mermaid divs
    document.addEventListener('DOMContentLoaded', function() {
      const mermaidBlocks = document.querySelectorAll('code.language-mermaid');
      mermaidBlocks.forEach((block) => {
        const pre = block.parentElement;
        const mermaidDiv = document.createElement('div');
        mermaidDiv.className = 'mermaid';
        mermaidDiv.textContent = block.textContent;
        
        // Replace the pre/code block with the mermaid div
        if (pre && pre.tagName === 'PRE') {
          pre.parentNode.replaceChild(mermaidDiv, pre);
        }
      });
      
      // Initialize mermaid after conversion
      mermaid.initialize({ 
        startOnLoad: true,
        theme: 'base',
        themeVariables: {
          primaryColor: 'hsl(var(--p))',
          primaryTextColor: 'hsl(var(--bc))',
          primaryBorderColor: 'hsl(var(--b3))',
          lineColor: 'hsl(var(--bc))',
          secondaryColor: 'hsl(var(--s))',
          tertiaryColor: 'hsl(var(--a))'
        }
      });
      
      // Manually trigger mermaid rendering
      mermaid.run();
    });
  </script>
</head>

<body class="bg-base-100 min-h-screen flex flex-col">
  <!-- Standard DaisyUI Navbar - full width above everything -->
  <div class="navbar bg-base-100 border-b border-base-300 px-4 lg:px-8 sticky top-0 z-50">
        {{#unless layout.hideMenu}}
        <div class="flex-none lg:hidden">
          <label for="my-drawer-menu" aria-label="open sidebar" class="btn btn-square btn-ghost">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block h-6 w-6 stroke-current">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </label>
        </div>
        {{/unless}}
        
        <div class="flex-1 min-w-0">
          <a class="flex items-center min-w-0" href="{{#if settings.site.friendlyUrl}}{{baseUrl}}{{else}}{{joinUrl baseUrl (transformUrl 'index.html' settings)}}{{/if}}">
              <img src="{{settings.site.logo}}" alt="{{settings.site.title}} Logo" class="w-5 h-5 mr-3 flex-shrink-0">
              <span class="text-xl font-mono font-bold truncate">{{#eq settings.site.title title}}{{settings.site.title}}{{else}}{{settings.site.title}} - {{title}}{{/eq}}</span>
          </a>
        </div>
        
        {{#if settings.search.enabled}}
        <!-- Mobile search input -->
        <div class="flex-none lg:hidden mr-2">
          <div class="dropdown dropdown-end">
            <input 
              id="search-mobile-navbar" 
              type="text" 
              placeholder="{{settings.search.placeholder}}" 
              class="input input-sm w-32 mobile-search-input" 
              tabindex="0"
              oninput="handleSearch(this.value)" 
            />
            <ul id="search-results-mobile-navbar" class="dropdown-content bg-base-100 rounded-box z-[60] w-72 p-2 shadow hidden max-h-96 overflow-y-auto">
              <!-- Search results will be populated here -->
            </ul>
          </div>
        </div>
        {{/if}}
        
        <!-- Mobile theme switcher -->
        <div class="flex-none lg:hidden mr-2">
          <div class="dropdown dropdown-end">
            <div tabindex="0" role="button" class="btn btn-square btn-ghost text-base-content theme-toggle-btn" aria-label="Theme">
              <!-- Sun icon (visible in light theme) -->
              <svg class="h-6 w-6 fill-current theme-sun-icon transition-opacity" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/>
              </svg>
              <!-- Moon icon (visible in dark theme) -->
              <svg class="h-6 w-6 fill-current theme-moon-icon absolute transition-opacity opacity-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"/>
              </svg>
            </div>
            <ul tabindex="0" class="dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow">
              <li><button onclick="setTheme('{{settings.site.theme.light}}')" class="justify-start">
                <svg class="h-5 w-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/>
                </svg>
                Light
              </button></li>
              <li><button onclick="setTheme('{{settings.site.theme.dark}}')" class="justify-start">
                <svg class="h-5 w-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1-.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"/>
                </svg>
                Dark
              </button></li>
            </ul>
          </div>
        </div>
        
        <!-- Desktop navigation and controls -->
        <div class="hidden lg:flex lg:items-center lg:gap-4">
          <ul class="menu menu-horizontal">
            {{#each navbar}}
              <li><a href="{{#if this.url}}{{joinUrl baseUrl (transformUrl this.url ../settings)}}{{else}}{{joinUrl baseUrl (transformUrl this.document ../settings)}}{{/if}}">{{this.title}}</a></li>
            {{/each}}
          </ul>
          
          {{#if settings.search.enabled}}
          <div class="dropdown dropdown-end">
            <input 
              id="search-desktop" 
              type="text" 
              placeholder="{{settings.search.placeholder}}" 
              class="input input-sm w-64" 
              tabindex="0"
              oninput="handleSearch(this.value)" 
            />
            <ul id="search-results" class="dropdown-content bg-base-100 rounded-box z-[1] w-96 p-2 shadow hidden max-h-96 overflow-y-auto">
              <!-- Search results will be populated here -->
            </ul>
          </div>
          {{/if}}
          
          <!-- Desktop theme switcher -->
          <div class="dropdown dropdown-end">
            <div tabindex="0" role="button" class="btn btn-square btn-ghost text-base-content theme-toggle-btn" aria-label="Theme">
              <!-- Sun icon (visible in light theme) -->
              <svg class="h-6 w-6 fill-current theme-sun-icon transition-opacity" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/>
              </svg>
              <!-- Moon icon (visible in dark theme) -->
              <svg class="h-6 w-6 fill-current theme-moon-icon absolute transition-opacity opacity-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1-.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"/>
              </svg>
            </div>
            <ul tabindex="0" class="dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow">
              <li><button onclick="setTheme('{{settings.site.theme.light}}')" class="justify-start">
                <svg class="h-5 w-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/>
                </svg>
                Light
              </button></li>
              <li><button onclick="setTheme('{{settings.site.theme.dark}}')" class="justify-start">
                <svg class="h-5 w-5 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1-.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"/>
                </svg>
                Dark
              </button></li>
            </ul>
          </div>
        </div>
  </div>
  
  <!-- Main content area with proper DaisyUI drawer layout -->
  <div class="flex-1 drawer {{#unless layout.hideMenu}}lg:drawer-open{{/unless}}">
    {{#unless layout.hideMenu}}
    <input id="my-drawer-menu" type="checkbox" class="drawer-toggle" />
    {{/unless}}
    
    <!-- Main content -->
    <div class="drawer-content flex flex-col min-h-full">
      {{#if (and layout.hideMenu layout.hideFooter)}}
      <!-- Full-screen hero layout - no padding -->
      <main>
        {{#block "main"}}
        {{/block}}
      </main>
      {{else}}
      <!-- Standard layout with padding -->
      <main class="flex-1 p-4 lg:p-8">
        {{#block "main"}}
        {{/block}}
      </main>
      {{/if}}
    </div>
    
    {{#unless layout.hideMenu}}
    <!-- Sidebar -->
    <div class="drawer-side">
      <label for="my-drawer-menu" aria-label="close sidebar" class="drawer-overlay"></label>
      <aside class="min-h-full w-80 bg-base-100">
        <ul class="menu p-4 text-base-content overflow-y-auto h-full">
          <!-- Mobile menu items -->
          <div class="lg:hidden mb-4">
            <li><a href="{{#if settings.site.friendlyUrl}}{{baseUrl}}{{else}}{{joinUrl baseUrl (transformUrl 'index.html' settings)}}{{/if}}">Home</a></li>
            {{#each navbar}}
              <li><a href="{{#if this.url}}{{joinUrl baseUrl (transformUrl this.url ../settings)}}{{else}}{{joinUrl baseUrl (transformUrl this.document ../settings)}}{{/if}}">{{this.title}}</a></li>
            {{/each}}
            <div class="divider"></div>
          </div>
          
          <!-- Sidebar content -->
          {{#each sidebars}}
            {{menuNode this activeDocId=../page.path}}
          {{/each}}
        </ul>
      </aside>
    </div>
    {{/unless}}
  </div>

  <!-- Standard DaisyUI footer -->
  {{#unless layout.hideFooter}}
  <footer class="footer footer-center p-4 bg-base-100 text-base-content border-t border-base-300">
    {{#if footer}}
    <div class="footer-content">
      {{#each footer}}
      <div class="footer-section">
        {{#if title}}<h3 class="footer-title font-bold mb-2">{{title}}</h3>{{/if}}
        {{#if items}}
        <nav class="flex flex-wrap gap-4 justify-center">
          {{#each items}}
          <a href="{{#if this.url}}{{joinUrl baseUrl (transformUrl this.url ../../settings)}}{{else}}{{joinUrl baseUrl (transformUrl this.document ../../settings)}}{{/if}}" class="link link-hover">{{this.label}}</a>
          {{/each}}
        </nav>
        {{/if}}
      </div>
      {{/each}}
    </div>
    {{else}}
    <aside>
      <p>Copyright Â© {{copyright.year}} - All rights reserved by <a href="https://okidoki.dev/index.html" class="link link-hover">OkiDoki.dev</a></p>
    </aside>
    {{/if}}
  </footer>
  {{/unless}}
</body>

</html>